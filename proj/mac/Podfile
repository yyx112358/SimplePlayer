# Uncomment the next line to define a global platform for your project
platform :osx, '13.0'

USE_EXTERNAL_SPDLOG = 0


REPO_ROOT_PATH = '../../'
PROJECT_ROOT_PATH = './'
THIRDPARTY_ROOT_PATH = REPO_ROOT_PATH + 'thirdParty/'
BUILD_PATH = REPO_ROOT_PATH + 'build/'


target 'SimplePlayer' do
  # Comment the next line if you don't want to use dynamic frameworks
  use_frameworks!

  pre_install do |installer|
    # spdlog
    system('cmake', '-S', THIRDPARTY_ROOT_PATH + 'spdlog/', '-B', BUILD_PATH + 'thirdParty/spdlog/')
    system('cmake', '--build', BUILD_PATH + 'thirdParty/spdlog/')

    # FFMpeg
    # system('sh', THIRDPARTY_ROOT_PATH + 'build_script/build_FFMpeg.sh')
  end
  
  # if USE_EXTERNAL_SPDLOG
  #   pod 'spdlog'
  # else
  #   pod 'spdlog', :path => THIRDPARTY_ROOT_PATH + 'spdlog'
  # end

  pod 'SimplePlayer', :path => '../../', :subspec => ['spdlog']


  
end
